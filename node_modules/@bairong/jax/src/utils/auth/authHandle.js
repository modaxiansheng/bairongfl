import _ from 'lodash';
import auth from './auth';

const authHandle = {
  authTree: [],
  setAuthTree: function() {
    let datas = auth.getAuth() || [];
    let englishNameFilter = datas.filter(item => item.englishName !== '' && item.englishName !== 'englishName') || [];
    let authTree = _.map(englishNameFilter, 'englishName') || [];
    this.authTree = authTree;
  },
  hasAuth: function (authStr) {
    if(!this.authTree.length){
      this.setAuthTree();
    }
    let isAuth = true;
    if (!this.authTree.some(val => val === authStr)) {
      isAuth = false;
    }
    return isAuth;
  }
};

export default authHandle;
