{"remainingRequest":"E:\\bairongfl\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\bairongfl\\src\\views\\predictTask\\PredictTask.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\bairongfl\\src\\views\\predictTask\\PredictTask.vue","mtime":1592460878502},{"path":"E:\\bairongfl\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\bairongfl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\bairongfl\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\nimport http from '@/utils/http';\nimport { taskForm } from '@/store/module/studyTask';\n\nexport default {\n  name: 'StudyTask',\n  data () {\n    return {\n      modelInfo:{\n        predictprojectname:\"\",\n        SampleFetchingtime:\"\",\n        dataperiod:\"\",\n        datatype:\"\",\n        hostselectedvalue:\"\",\n        guestselectedvalue:\"\",\n        selectedmodel:\"\",\n        modelInfos:[]\n      },\n      tabType: 'study',\n      hostData: [\n      ],\n      guestData: [],\n      btnLoading: false,\n      taskForm,\n      taskRule: {},\n      baseRule: {\n        predictprojectname: [\n          { required: true, message: '请输入项目的名称', trigger: 'blur' }\n        ],\n        hostselectedvalue: [\n          { required: true, message: '请选择Host方数据', trigger: 'change' }\n        ],\n        guestselectedvalue: [\n          { required: true, message: '请选择Guest方数据', trigger: 'change' }\n        ],\n        selectedmodel:[\n          { required: true, message: '请选择model', trigger: 'change' }\n        ],\n      },\n    };\n  },\n  methods: {\n    handleSubmit () {\n        console.log(this.modelInfo)\n        Promise.all([ this.createHttp()]).then(resList => {\n                console.log(resList)\n                resList.forEach(element => {\n                    console.log(element)\n                    if(element.status==0){\n                        // window.open(element.result.board_url);\n                        console.log(element.result.board_url)\n                    }          \n                });\n            });\n    },\n    createHttp () {\n      var submit_info = {\n          'name' : this.modelInfo.predictprojectname,\n          'role':this.common.coderole.role,\n          'task':'predict',\n          'data':{\n              'start':this.modelInfo.SampleFetchingtime,\n              'n':Number(this.modelInfo.dataperiod),\n              'match':this.modelInfo.datatype!=\"用户特征早一个周期取数\",\n              'path_host':this.modelInfo.hostselectedvalue,\n              'path_guest':this.modelInfo.guestselectedvalue,\n          },\n          \"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n          \"model_version\": this.modelInfo.selectedmodel\n      }\n      console.log(submit_info)\n      return http.post(\"Submit\",submit_info)\n    },\n    getdata(){\n        Promise.all([http.get(\"getDatainfo\")]).then(resList => {\n            resList.forEach((item)=>{\n              //  console.log(item)\n               item.forEach((itemson)=>{\n                //  console.log(itemson.data_attribution)\n                 if(itemson.data_attribution==0){\n                   this.hostData.push(itemson)\n                 }else if(itemson.data_attribution==1){\n                   this.guestData.push(itemson)\n                 }\n               })\n               \n            })\n        });\n         Promise.all([http.get(\"getModelinfo\")]).then(resList => {\n            resList.forEach((item)=>{\n              //  console.log(item[0].model_version)\n               this.modelInfo.modelInfos=item[0].model_version\n              //  console.log( this.modelInfo.modelInfos)\n                 for(var item in this.modelInfo.modelInfos){\n                    // console.log(item)\n                    // console.log(this.modelInfo.modelInfos[item])\n                    \n                }\n            })\n        });\n        // for(var item in this.modelInfo.modelInfos){\n        //     console.log(item)\n            // console.log(this.modelInfo.modelInfos.length)\n            \n        // }\n    },\n  },\n  mounted(){\n    this.getdata()\n  }\n};\n\n",{"version":3,"sources":["PredictTask.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AA8CA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA","file":"PredictTask.vue","sourceRoot":"src/views/predictTask","sourcesContent":["<template>\n  <div class=\"router-body study-task-page\">\n    <div class=\"router-body-inner\">\n      <div style=\"position: relative\">\n      \n        <Form ref=\"taskForm\" :model=\"taskForm\"  :label-width=\"100\" style=\"width: 400px;\">\n          <FormItem label=\"项目名称\" prop=\"predictprojectname\">\n              <Input v-model=\"modelInfo.predictprojectname\" placeholder=\"请输入项目的名称\"></Input>\n          </FormItem>\n          <FormItem label=\"取数时间\" prop=\"SampleFetchingtime\">\n              <Input v-model=\"modelInfo.SampleFetchingtime\" placeholder=\"请输入数据的取数时间\"></Input>\n          </FormItem>\n          <FormItem label=\"取数周期\" prop=\"dataperiod\">\n              <Input v-model=\"modelInfo.dataperiod\" placeholder=\"请输入数据的取数周期\"></Input>\n          </FormItem>\n          <FormItem label=\"取数规则\" prop=\"datatype\">\n              <Select v-model=\"modelInfo.datatype\" placeholder=\"请输入数据的取数取数规则\">\n                  <Option value=\"用户特征早一个周期取数\">用户特征早一个周期取数</Option>\n                  <Option value=\"样本标签和用户特征同一个周期取数\">样本标签和用户特征同一个周期取数</Option>\n              </Select>\n          </FormItem>\n          <FormItem label=\"Host方数据\" prop=\"hostselectedvalue\">\n            <Select v-model=\"modelInfo.hostselectedvalue\">\n              <Option v-for=\"item in hostData\" :value=\"item.data_path\" :key=\"item.data_id\">数据ID:{{item.data_id}}名称:{{ item.data_name }},类型:{{item.data_type==0?\"用户特征\":\"样本标签\"}}</Option>\n            </Select>\n          </FormItem>\n          <FormItem label=\"Guest方数据\" prop=\"guestselectedvalue\">\n            <Select v-model=\"modelInfo.guestselectedvalue\">\n              <Option v-for=\"item in guestData\" :value=\"item.data_path\" :key=\"item.data_id\">数据ID:{{item.data_id}}名称:{{ item.data_name }},类型:{{item.data_type==0?\"用户特征\":\"样本标签\"}}</Option>\n            </Select>\n          </FormItem>\n           <FormItem label=\"选择模型\" prop=\"selectedmodel\">\n              <Select v-model=\"modelInfo.selectedmodel\">\n                <Option v-for=\"(item,itemindex) in modelInfo.modelInfos\" :value=\"item\" :key=\"itemindex\">{{ item }}</Option>\n              </Select>\n            </FormItem>\n          <FormItem label=\"\">\n            <Button type=\"primary\"  @click=\"handleSubmit\">提交预测任务</Button>\n          </FormItem>\n        </Form>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport http from '@/utils/http';\nimport { taskForm } from '@/store/module/studyTask';\n\nexport default {\n  name: 'StudyTask',\n  data () {\n    return {\n      modelInfo:{\n        predictprojectname:\"\",\n        SampleFetchingtime:\"\",\n        dataperiod:\"\",\n        datatype:\"\",\n        hostselectedvalue:\"\",\n        guestselectedvalue:\"\",\n        selectedmodel:\"\",\n        modelInfos:[]\n      },\n      tabType: 'study',\n      hostData: [\n      ],\n      guestData: [],\n      btnLoading: false,\n      taskForm,\n      taskRule: {},\n      baseRule: {\n        predictprojectname: [\n          { required: true, message: '请输入项目的名称', trigger: 'blur' }\n        ],\n        hostselectedvalue: [\n          { required: true, message: '请选择Host方数据', trigger: 'change' }\n        ],\n        guestselectedvalue: [\n          { required: true, message: '请选择Guest方数据', trigger: 'change' }\n        ],\n        selectedmodel:[\n          { required: true, message: '请选择model', trigger: 'change' }\n        ],\n      },\n    };\n  },\n  methods: {\n    handleSubmit () {\n        console.log(this.modelInfo)\n        Promise.all([ this.createHttp()]).then(resList => {\n                console.log(resList)\n                resList.forEach(element => {\n                    console.log(element)\n                    if(element.status==0){\n                        // window.open(element.result.board_url);\n                        console.log(element.result.board_url)\n                    }          \n                });\n            });\n    },\n    createHttp () {\n      var submit_info = {\n          'name' : this.modelInfo.predictprojectname,\n          'role':this.common.coderole.role,\n          'task':'predict',\n          'data':{\n              'start':this.modelInfo.SampleFetchingtime,\n              'n':Number(this.modelInfo.dataperiod),\n              'match':this.modelInfo.datatype!=\"用户特征早一个周期取数\",\n              'path_host':this.modelInfo.hostselectedvalue,\n              'path_guest':this.modelInfo.guestselectedvalue,\n          },\n          \"model_id\": \"arbiter-10000#guest-9999#host-10000#model\",\n          \"model_version\": this.modelInfo.selectedmodel\n      }\n      console.log(submit_info)\n      return http.post(\"Submit\",submit_info)\n    },\n    getdata(){\n        Promise.all([http.get(\"getDatainfo\")]).then(resList => {\n            resList.forEach((item)=>{\n              //  console.log(item)\n               item.forEach((itemson)=>{\n                //  console.log(itemson.data_attribution)\n                 if(itemson.data_attribution==0){\n                   this.hostData.push(itemson)\n                 }else if(itemson.data_attribution==1){\n                   this.guestData.push(itemson)\n                 }\n               })\n               \n            })\n        });\n         Promise.all([http.get(\"getModelinfo\")]).then(resList => {\n            resList.forEach((item)=>{\n              //  console.log(item[0].model_version)\n               this.modelInfo.modelInfos=item[0].model_version\n              //  console.log( this.modelInfo.modelInfos)\n                 for(var item in this.modelInfo.modelInfos){\n                    // console.log(item)\n                    // console.log(this.modelInfo.modelInfos[item])\n                    \n                }\n            })\n        });\n        // for(var item in this.modelInfo.modelInfos){\n        //     console.log(item)\n            // console.log(this.modelInfo.modelInfos.length)\n            \n        // }\n    },\n  },\n  mounted(){\n    this.getdata()\n  }\n};\n\n</script>\n\n<style lang=\"less\" scoped>\n.study-task-page {\n  .ivu-tabs-bar {\n    margin-bottom: 30px;\n  }\n}\n.stmodelparams{\n  position: absolute;\n  top: 0px;\n  left: 500px;\n}\n</style>\n"]}]}