{"remainingRequest":"E:\\bairongfl\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\bairongfl\\src\\views\\updataPage\\UpdataPage.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\bairongfl\\src\\views\\updataPage\\UpdataPage.vue","mtime":1589016553782},{"path":"E:\\bairongfl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\bairongfl\\node_modules\\babel-loader\\lib\\index.js","mtime":499162500000},{"path":"E:\\bairongfl\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\bairongfl\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":["//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n//\n\n\nexport default {\n    mounted() {\n\n        this.getForumData();\n\n    },\n    methods: {\n\n\n        /**\n         * 删除数据分类数据\n         */\n\n        deleteForum() {\n\n            this.delete_loading = true;\n\n            var url = this.ServerIp + this.API.forumDeleteCategory;\n            var that = this;\n\n            var params = {};\n            params.fc_id = this.$route.query.fc_id;\n\n            this.$http({\n                method: 'post',\n                url: url,\n                data: params\n            }).then((res) => {\n\n                this.delete_loading = false;\n                this.deleteModel = false;\n\n                if (res.data.success) {\n                    that.$router.go(-1);\n                } else {\n                    that.$Message.error(res.data.result);\n                }\n\n            });\n        },\n\n        /**\n         * 数据上传\n         */\n        doUpload(files) {\n            var that = this;\n            this.uploadOneImage(files, function (err, data) {\n                if (err) {\n                    that.formItem.fc_icon = data.url;\n                    that.organizationLogoIsShow = true;\n                } else {\n                    alert(\"数据上传失败\");\n                }\n\n            });\n        },\n        handleDelete() {\n\n            this.deleteModel = true;\n\n        },\n\n        /**\n         * 提交数据\n         */\n        submit(name) {\n\n            this.$refs[name].validate((valid) => {\n\n                if (valid) {\n\n                    var url = this.ServerIp + this.API.forumUpdateCategory;\n                    var that = this;\n\n                    var params = {};\n                    params.fc_id = this.$route.query.fc_id;\n                    params.fc_name = this.formItem.fc_name;\n                    params.fc_desc = this.formItem.fc_desc;\n                    params.fc_icon = this.formItem.fc_icon;\n\n                    this.submit_loading = true;\n                    this.$http({\n                        method: 'post',\n                        url: url,\n                        data: params\n                    }).then((res) => {\n\n                        this.submit_loading = false;\n\n                        if (res.data.success) {\n                            that.$Message.success('数据更新成功');\n                            that.$router.go(-1);\n\n                        } else {\n                            that.$Message.error(res.data.result);\n                        }\n\n                    });\n\n\n                }\n\n            });\n\n\n        },\n\n        /**\n         * 获取数据\n         */\n        getForumData() {\n\n            var url = this.ServerIp + this.API.forumsSearchCategory + \"/fc_id/\" + this.$route.query.fc_id;\n            var that = this;\n\n            this.$Spin.show();\n            this.$http({\n                method: 'get',\n                url: url\n            }).then((res) => {\n\n\n                this.$Spin.hide();\n                if (res.data.success) {\n\n                    var forumData = res.data.result.data[0];\n                    that.formItem.fc_name = forumData.fc_name;\n                    that.formItem.fc_desc = forumData.fc_desc;\n                    that.formItem.fc_icon = forumData.fc_icon;\n                    if (that.formItem.fc_name != null && that.formItem.fc_name) {\n                        that.categoryLogoIsShow = true\n                    } else {\n                        that.categoryLogoIsShow = false\n\n                    }\n                }\n\n            });\n\n\n        }\n\n    },\n    data() {\n        return {\n            deleteModel: false,\n            submit_loading: false,\n            delete_loading: false,\n            formItem: {\n                fc_name: \"\",\n                fc_icon: \"\",\n                fc_order: \"\",\n                fc_desc: \"\",\n                fc_article_count: \"\",\n                fc_concern_count: \"\",\n            },\n            data: [],\n            categoryLogoIsShow: false,\n            ruleInline: {\n                fc_name: [\n                    {required: true, message: '数据标题不能为空', trigger: 'blur'},\n                ],\n                fc_icon: [\n                    {required: true, message: '数据不能为空', trigger: 'blur'},\n                ],\n                fc_desc: [\n                    {required: true, message: '数据分类描述不能为空', trigger: 'blur'},\n                ]\n            }\n        }\n    }\n}\n\n\n",{"version":3,"sources":["UpdataPage.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqEA;AACA;;AAEA;;AAEA;AACA;;;AAGA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;AACA;AACA;;AAEA;;AAEA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;;AAEA;;AAEA;AACA;AACA;;AAEA;AACA;AACA;;AAEA;;;AAGA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA;AACA;;;AAGA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;;AAEA;;;AAGA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA","file":"UpdataPage.vue","sourceRoot":"src/views/updataPage","sourcesContent":["<template>\n    <div>\n \n        <Form :model=\"formItem\" ref=\"formItem\" :rules=\"ruleInline\" :label-width=\"100\" lable-position=\"left\">\n \n            <FormItem label=\"数据名称 : \" prop=\"fc_name\" width=\"260\">\n                <Input v-model=\"formItem.fc_name\" placeholder=\"请输入数据名称\" class=\"input_width\"></Input>\n            </FormItem>\n \n \n            <FormItem label=\"数据描述 : \" prop=\"fc_desc\">\n                <Input v-model=\"formItem.fc_desc\" type=\"textarea\" :rows=\"4\" style=\"width:400px;\"\n                       placeholder=\"请输入数据描述\"></Input>\n            </FormItem>\n \n            <FormItem label=\"数据: \">\n                <div class=\"uploadBox\" prop=\"fc_icon\">\n                    <input type=\"file\" @change=\"doUpload\" ref=\"inputFile\"/>\n                    <Icon type=\"ios-plus-empty\" class=\"uploadIcon\"></Icon>\n \n                    <div class=\"imagePreview\" v-show=\"categoryLogoIsShow\">\n                        <img :src=\"formItem.fc_icon\" @click=\"$refs.inputFile.click()\"/>\n                    </div>\n                </div>\n                <div v-show=\"categoryLogoIsShow\" style=\"text-align: left;\">\n                    <Icon type=\"information-circled\"></Icon>\n                    可点击数据重新选择\n                </div>\n \n            </FormItem>\n \n \n            <FormItem>\n                <Button type=\"primary\" size=\"large\" :loading=\"submit_loading\" @click=\"submit('formItem')\">提交</Button>\n                <Button type=\"error\" size=\"large\" @click=\"handleDelete\" style=\"margin-left: 8px;\">删除</Button>\n            </FormItem>\n \n        </Form>\n \n \n        <Modal v-model=\"deleteModel\" width=\"260\">\n            <p slot=\"header\" style=\"color:#f60;text-align:center\">\n                <Icon type=\"information-circled\"></Icon>\n                <span>删除确认</span>\n            </p>\n            <div style=\"text-align:center\">\n                <p>删除后数据不可恢复,确定要这么做吗?</p>\n            </div>\n            <div slot=\"footer\">\n                <Button type=\"error\" size=\"large\" long :loading=\"delete_loading\" @click=\"deleteForum\">确定删除</Button>\n            </div>\n        </Modal>\n             <Table :loading=\"loading\" :columns=\"columns\" :data=\"categorydata\"></Table>\n \n        <div style=\"margin-top:10px;overflow: hidden\">\n            <div style=\"float: right;\">\n                <Page :total=\"totalCount\" :current=\"1\" :page-size=\"pageSize\" @on-page-size-change=\"changePageSize\"\n                      @on-change=\"changePage\" show-total show-sizer></Page>\n \n            </div>\n        </div>\n\n \n    </div>\n</template>\n\n \n<script type=\"text/ecmascript-6\">\n \n    export default {\n        mounted() {\n \n            this.getForumData();\n \n        },\n        methods: {\n \n \n            /**\n             * 删除数据分类数据\n             */\n \n            deleteForum() {\n \n                this.delete_loading = true;\n \n                var url = this.ServerIp + this.API.forumDeleteCategory;\n                var that = this;\n \n                var params = {};\n                params.fc_id = this.$route.query.fc_id;\n \n                this.$http({\n                    method: 'post',\n                    url: url,\n                    data: params\n                }).then((res) => {\n \n                    this.delete_loading = false;\n                    this.deleteModel = false;\n \n                    if (res.data.success) {\n                        that.$router.go(-1);\n                    } else {\n                        that.$Message.error(res.data.result);\n                    }\n \n                });\n            },\n \n            /**\n             * 数据上传\n             */\n            doUpload(files) {\n                var that = this;\n                this.uploadOneImage(files, function (err, data) {\n                    if (err) {\n                        that.formItem.fc_icon = data.url;\n                        that.organizationLogoIsShow = true;\n                    } else {\n                        alert(\"数据上传失败\");\n                    }\n \n                });\n            },\n            handleDelete() {\n \n                this.deleteModel = true;\n \n            },\n \n            /**\n             * 提交数据\n             */\n            submit(name) {\n \n                this.$refs[name].validate((valid) => {\n \n                    if (valid) {\n \n                        var url = this.ServerIp + this.API.forumUpdateCategory;\n                        var that = this;\n \n                        var params = {};\n                        params.fc_id = this.$route.query.fc_id;\n                        params.fc_name = this.formItem.fc_name;\n                        params.fc_desc = this.formItem.fc_desc;\n                        params.fc_icon = this.formItem.fc_icon;\n \n                        this.submit_loading = true;\n                        this.$http({\n                            method: 'post',\n                            url: url,\n                            data: params\n                        }).then((res) => {\n \n                            this.submit_loading = false;\n \n                            if (res.data.success) {\n                                that.$Message.success('数据更新成功');\n                                that.$router.go(-1);\n \n                            } else {\n                                that.$Message.error(res.data.result);\n                            }\n \n                        });\n \n \n                    }\n \n                });\n \n \n            },\n \n            /**\n             * 获取数据\n             */\n            getForumData() {\n \n                var url = this.ServerIp + this.API.forumsSearchCategory + \"/fc_id/\" + this.$route.query.fc_id;\n                var that = this;\n \n                this.$Spin.show();\n                this.$http({\n                    method: 'get',\n                    url: url\n                }).then((res) => {\n \n \n                    this.$Spin.hide();\n                    if (res.data.success) {\n \n                        var forumData = res.data.result.data[0];\n                        that.formItem.fc_name = forumData.fc_name;\n                        that.formItem.fc_desc = forumData.fc_desc;\n                        that.formItem.fc_icon = forumData.fc_icon;\n                        if (that.formItem.fc_name != null && that.formItem.fc_name) {\n                            that.categoryLogoIsShow = true\n                        } else {\n                            that.categoryLogoIsShow = false\n \n                        }\n                    }\n \n                });\n \n \n            }\n \n        },\n        data() {\n            return {\n                deleteModel: false,\n                submit_loading: false,\n                delete_loading: false,\n                formItem: {\n                    fc_name: \"\",\n                    fc_icon: \"\",\n                    fc_order: \"\",\n                    fc_desc: \"\",\n                    fc_article_count: \"\",\n                    fc_concern_count: \"\",\n                },\n                data: [],\n                categoryLogoIsShow: false,\n                ruleInline: {\n                    fc_name: [\n                        {required: true, message: '数据标题不能为空', trigger: 'blur'},\n                    ],\n                    fc_icon: [\n                        {required: true, message: '数据不能为空', trigger: 'blur'},\n                    ],\n                    fc_desc: [\n                        {required: true, message: '数据分类描述不能为空', trigger: 'blur'},\n                    ]\n                }\n            }\n        }\n    }\n \n \n</script>\n\n<style scope>\n  .input_width{\n    width :500px;\n  }\n</style>"]}]}